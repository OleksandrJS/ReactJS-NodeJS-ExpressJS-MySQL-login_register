{"version":3,"sources":["hooks/auth.hook.js","components/RegForm.js","components/AuthLinks.js","Validators/regValidation.js","pages/RegistrationPage.js","components/SigninForm.js","Validators/signinValidation.js","pages/SignInPage.js","pages/UserPage.js","App.js","routes.js","index.js"],"names":["storageName","RegForm","formReg","username","email","login","password","handleChange","checked","handleCheck","birthDate","setBirthDate","handlerRegistration","regMessage","error","success","useState","countries","setCountries","useEffect","a","axios","data","map","item","country","fetchData","onSubmit","className","name","onChange","value","placeholder","type","onClick","e","target","defaultValue","hidden","sort","i","selected","date","placeholderText","maxDate","Date","dateFormat","showYearDropdown","yearDropdownItemNumber","scrollableYearDropdown","style","cursor","AuthLinks","activeClassName","to","exact","regSchema","yup","shape","required","dayOfTheBirth","default","oneOf","RegistrationPage","setFormReg","setChecked","setRegMessage","currentTime","registrationMessage","setTimeout","preventDefault","formData","isValid","post","timestamp","birth_date","then","response","message","prev","SigninForm","formLogin","emailOrLogin","handleLoginForm","handlerSignin","signInMessage","signinSchema","SignInPage","useContext","AuthContext","setFormLogin","setSignInMessage","timeout","console","log","length","res","UserPage","logout","userEmail","createContext","App","setUserName","setUserEmail","isAuthenticated","setIsAuthenticated","useCallback","localStorage","setItem","JSON","stringify","removeItem","parse","getItem","useAuth","routes","path","Routes","Provider","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.78a7bf68.chunk.js","sourcesContent":["/** @format */\r\n\r\nimport { useState, useCallback, useEffect } from 'react';\r\n\r\nconst storageName = 'userdata';\r\n\r\nexport const useAuth = () => {\r\n  const [username, setUserName] = useState(null);\r\n  const [userEmail, setUserEmail] = useState(null);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n\r\n  const login = useCallback((name, email) => {\r\n    setIsAuthenticated(true);\r\n    setUserName(name);\r\n    setUserEmail(email);\r\n\r\n    localStorage.setItem(\r\n      storageName,\r\n      JSON.stringify({\r\n        username: name,\r\n        userEmail: email,\r\n        isAuthenticated: true,\r\n      }),\r\n    );\r\n  }, []);\r\n\r\n  const logout = useCallback(() => {\r\n    setIsAuthenticated(false);\r\n    setUserName(null);\r\n    setUserEmail(null);\r\n    localStorage.removeItem(storageName);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const data = JSON.parse(localStorage.getItem(storageName));\r\n    if (data) {\r\n      setIsAuthenticated(data.isAuthenticated);\r\n      setUserName(data.username);\r\n      setUserEmail(data.userEmail);\r\n    }\r\n  }, [login]);\r\n\r\n  return { login, logout, isAuthenticated, username, userEmail };\r\n};\r\n","/** @format */\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport DatePicker from 'react-datepicker';\r\nimport 'react-datepicker/dist/react-datepicker.min.css';\r\n\r\nconst RegForm = ({\r\n  formReg: { username, email, login, password },\r\n  handleChange,\r\n  checked,\r\n  handleCheck,\r\n  birthDate,\r\n  setBirthDate,\r\n  handlerRegistration,\r\n  regMessage: { error, success },\r\n}) => {\r\n  const [countries, setCountries] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      const { data } = await axios('http://localhost:5000/countries');\r\n      setCountries(data.map((item) => item.country));\r\n    };\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleSelectClick = (e) => (e.target.className = 'select-active');\r\n\r\n  return (\r\n    <>\r\n      <form onSubmit={handlerRegistration} className=\"reg_form\">\r\n        <label>Registration</label>\r\n        <input\r\n          className=\"input-text\"\r\n          name=\"email\"\r\n          onChange={handleChange}\r\n          value={email}\r\n          placeholder=\"email\"\r\n        />\r\n        <input\r\n          className=\"input-text\"\r\n          name=\"login\"\r\n          onChange={handleChange}\r\n          value={login}\r\n          placeholder=\"login\"\r\n        />\r\n        <input\r\n          className=\"input-text\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          onChange={handleChange}\r\n          value={password}\r\n          placeholder=\"password\"\r\n        />\r\n        <input\r\n          className=\"input-text\"\r\n          name=\"username\"\r\n          onChange={handleChange}\r\n          value={username}\r\n          placeholder=\"name\"\r\n        />\r\n        <select\r\n          onChange={handleChange}\r\n          onClick={handleSelectClick}\r\n          defaultValue=\"\"\r\n          name=\"country\">\r\n          <option hidden value=\"\">\r\n            Select your Country\r\n          </option>\r\n          {countries !== null &&\r\n            countries.sort().map((item, i) => (\r\n              <option value={item} key={i}>\r\n                {item}\r\n              </option>\r\n            ))}\r\n        </select>\r\n        <DatePicker\r\n          selected={birthDate}\r\n          onChange={(date) => setBirthDate(date)}\r\n          placeholderText=\"Select you birth date\"\r\n          maxDate={new Date()}\r\n          dateFormat=\"dd/MM/yyyy\"\r\n          showYearDropdown\r\n          yearDropdownItemNumber={40}\r\n          scrollableYearDropdown\r\n        />\r\n        <div className=\"terms\">\r\n          <input\r\n            type=\"checkbox\"\r\n            onChange={handleCheck}\r\n            checked={checked}\r\n            style={{ cursor: 'pointer' }}\r\n          />\r\n          <p onClick={handleCheck}>agree with terms and conditions</p>\r\n        </div>\r\n        <button className=\"btn\" type=\"submit\">\r\n          Sign up\r\n        </button>\r\n      </form>\r\n      <p className=\"Error\">{error}</p>\r\n      <p className=\"Success\">{success}</p>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RegForm;\r\n","/** @format */\r\n\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nexport const AuthLinks = () => {\r\n  return (\r\n    <div className=\"auth-links\">\r\n      <NavLink activeClassName=\"is-active\" to=\"/\" exact>\r\n        Sign Up\r\n      </NavLink>\r\n      <NavLink activeClassName=\"is-active\" to=\"/signIn\">\r\n        Sign In\r\n      </NavLink>\r\n    </div>\r\n  );\r\n};\r\n","/** @format */\r\n\r\nimport * as yup from 'yup';\r\n\r\nexport const regSchema = yup.object().shape({\r\n  email: yup.string().email().required(),\r\n  login: yup.string().required(),\r\n  password: yup.string().required(),\r\n  username: yup.string().required(),\r\n  country: yup.string().required(),\r\n  dayOfTheBirth: yup\r\n    .date()\r\n    .default(() => new Date())\r\n    .required(),\r\n  checked: yup.bool().oneOf([true], 'Field must be checked').required(),\r\n});\r\n","/** @format */\r\n\r\nimport { useState } from 'react';\r\nimport axios from 'axios';\r\nimport RegForm from '../components/RegForm';\r\nimport { AuthLinks } from '../components/AuthLinks';\r\nimport { regSchema } from '../Validators/regValidation';\r\n\r\nconst RegistrationPage = () => {\r\n  const [formReg, setFormReg] = useState({\r\n    email: '',\r\n    login: '',\r\n    password: '',\r\n    username: '',\r\n    country: '',\r\n  });\r\n\r\n  const [birthDate, setBirthDate] = useState('');\r\n\r\n  const [checked, setChecked] = useState(false);\r\n\r\n  const [regMessage, setRegMessage] = useState({\r\n    error: '',\r\n    success: '',\r\n  });\r\n\r\n  const handleChangeRegForm = (e) =>\r\n    setFormReg({\r\n      ...formReg,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n\r\n  const handleCheck = () => setChecked((prev) => !prev);\r\n\r\n  const currentTime = +new Date();\r\n\r\n  const timeout = () =>\r\n    setTimeout(\r\n      () =>\r\n        setRegMessage({\r\n          error: '',\r\n          success: '',\r\n        }),\r\n      5000,\r\n    );\r\n\r\n  const registrationMessage = (error, success) => {\r\n    setRegMessage({\r\n      error: error,\r\n      success: success,\r\n    });\r\n    timeout();\r\n  };\r\n\r\n  const handlerRegistration = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const { email, login, password, username, country } = formReg;\r\n\r\n    let formData = {\r\n      email,\r\n      login,\r\n      password,\r\n      username,\r\n      country,\r\n      birthDate,\r\n      checked,\r\n    };\r\n\r\n    const isValid = await regSchema.isValid(formData);\r\n\r\n    if (isValid && email !== login) {\r\n      axios\r\n        .post('http://localhost:5000/auth/register', {\r\n          email: formReg.email,\r\n          login: formReg.login,\r\n          password: formReg.password,\r\n          username: formReg.username,\r\n          country: formReg.country,\r\n          timestamp: currentTime,\r\n          birth_date: birthDate,\r\n        })\r\n        .then((response) => {\r\n          registrationMessage(\r\n            response.data.error || '',\r\n            response.data.message || '',\r\n          );\r\n        });\r\n    } else {\r\n      if (email === login && login !== '' && email !== '') {\r\n        registrationMessage('Email and login must be unique', '');\r\n      } else {\r\n        registrationMessage('All fields must be filled', '');\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <AuthLinks />\r\n      <RegForm\r\n        formReg={formReg}\r\n        birthDate={birthDate}\r\n        setBirthDate={setBirthDate}\r\n        checked={checked}\r\n        handleChange={handleChangeRegForm}\r\n        handleCheck={handleCheck}\r\n        handlerRegistration={handlerRegistration}\r\n        regMessage={regMessage}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RegistrationPage;\r\n","/** @format */\r\n\r\nconst SigninForm = ({\r\n  formLogin: { emailOrLogin, password },\r\n  handleLoginForm,\r\n  handlerSignin,\r\n  signInMessage,\r\n}) => {\r\n  return (\r\n    <>\r\n      <form onSubmit={handlerSignin} className=\"signin_form\">\r\n        <label>Sign in</label>\r\n        <input\r\n          className=\"input-text\"\r\n          name=\"emailOrLogin\"\r\n          onChange={handleLoginForm}\r\n          value={emailOrLogin}\r\n          placeholder=\"login or email\"\r\n        />\r\n        <input\r\n          className=\"input-text\"\r\n          name=\"password\"\r\n          type=\"password\"\r\n          onChange={handleLoginForm}\r\n          value={password}\r\n          placeholder=\"password\"\r\n        />\r\n        <button className=\"btn\" type=\"submit\">\r\n          Sign in\r\n        </button>\r\n      </form>\r\n      <p className=\"Error\">{signInMessage}</p>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SigninForm;\r\n","/** @format */\r\n\r\nimport * as yup from 'yup';\r\n\r\nexport const signinSchema = yup.object().shape({\r\n  emailOrLogin: yup.string().required(),\r\n  password: yup.string().required(),\r\n});\r\n","/** @format */\r\n\r\nimport { useState, useContext } from 'react';\r\nimport SigninForm from '../components/SigninForm';\r\nimport axios from 'axios';\r\nimport { AuthContext } from '../App';\r\nimport { AuthLinks } from '../components/AuthLinks';\r\nimport { signinSchema } from '../Validators/signinValidation';\r\n\r\nconst SignInPage = () => {\r\n  const { login } = useContext(AuthContext);\r\n\r\n  const [formLogin, setFormLogin] = useState({\r\n    emailOrLogin: '',\r\n    password: '',\r\n  });\r\n\r\n  const [signInMessage, setSignInMessage] = useState('');\r\n\r\n  const handleLoginForm = (e) =>\r\n    setFormLogin({ ...formLogin, [e.target.name]: e.target.value });\r\n\r\n  const timeout = () => {\r\n    setTimeout(() => setSignInMessage(''), 5000);\r\n  };\r\n\r\n  const handlerSignin = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const { emailOrLogin, password } = formLogin;\r\n\r\n    let formData = {\r\n      emailOrLogin,\r\n      password,\r\n    };\r\n\r\n    const isValid = await signinSchema.isValid(formData);\r\n\r\n    if (isValid) {\r\n      axios\r\n        .post('http://localhost:5000/auth/signin/email', {\r\n          email: formLogin.emailOrLogin,\r\n          password: formLogin.password,\r\n        })\r\n        .then((response) => {\r\n          console.log(response);\r\n          if (response.data.length === 0 || response.data.message) {\r\n            axios\r\n              .post('http://localhost:5000/auth/signin/login', {\r\n                login: formLogin.emailOrLogin,\r\n                password: formLogin.password,\r\n              })\r\n              .then((res) => {\r\n                console.log(res);\r\n                setSignInMessage(res.data.message);\r\n                timeout();\r\n                if (res.data.length !== 0 && !res.data.message) {\r\n                  const data = res.data['0'];\r\n                  const { username, email } = data;\r\n                  login(username, email);\r\n                }\r\n              });\r\n          }\r\n          if (!response.data.message) {\r\n            const data = response.data['0'];\r\n            const { username, email } = data;\r\n            login(username, email);\r\n          }\r\n        });\r\n    } else {\r\n      setSignInMessage('All fields must be filled');\r\n      timeout();\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <AuthLinks />\r\n      <SigninForm\r\n        formLogin={formLogin}\r\n        handleLoginForm={handleLoginForm}\r\n        handlerSignin={handlerSignin}\r\n        signInMessage={signInMessage}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SignInPage;\r\n","/** @format */\r\nimport { AuthContext } from '../App';\r\nimport { useContext } from 'react';\r\n\r\nconst UserPage = () => {\r\n  const { logout, username, userEmail } = useContext(AuthContext);\r\n\r\n  return (\r\n    <div>\r\n      <h3>Welcome, {username}</h3>\r\n      <h5>email: {userEmail}</h5>\r\n      <button className=\"btn\" onClick={logout}>\r\n        Log out\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserPage;\r\n","/** @format */\n\nimport { createContext } from 'react';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { useAuth } from './hooks/auth.hook';\nimport { Routes } from './routes';\n\nexport const AuthContext = createContext();\n\nfunction App() {\n  const { login, logout, username, userEmail, isAuthenticated } = useAuth();\n  const routes = Routes(isAuthenticated);\n\n  return (\n    <div className=\"form-wrapper\">\n      <AuthContext.Provider\n        value={{\n          login,\n          logout,\n          username,\n          userEmail,\n        }}>\n        <Router>{routes}</Router>\n      </AuthContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","/** @format */\r\n\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\nimport RegistrationPage from './pages/RegistrationPage';\r\nimport SignInPage from './pages/SignInPage';\r\nimport UserPage from './pages/UserPage';\r\n\r\nexport const Routes = (isAuthenticated) => {\r\n  if (isAuthenticated) {\r\n    return (\r\n      <Switch>\r\n        <Route path=\"/user\" exact>\r\n          <UserPage />\r\n        </Route>\r\n        <Redirect to=\"/user\" />\r\n      </Switch>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Switch>\r\n      <Route path=\"/\" exact>\r\n        <RegistrationPage />\r\n      </Route>\r\n      <Route path=\"/signin\">\r\n        <SignInPage />\r\n      </Route>\r\n      <Redirect to=\"/\" />\r\n    </Switch>\r\n  );\r\n};\r\n","/** @format */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}